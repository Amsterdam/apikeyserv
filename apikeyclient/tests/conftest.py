from django.conf import settings
import pytest


API_KEY = (
    # Generated in the admin, valid until 2999
    "eyJhbGciOiJFZERTQSIsInR5cCI6IkpXVCJ9."
    "eyJzdWIiOjQ3MzQ1NTQwMjA0Njg1OTkxMDIsImV4cCI6MzI0OTA5NDk1NjJ9."
    "ON3rAWBzEMlPElT4kJCkfLvtwozSoXujv1x1T2PStz1pOdKWGYr3qLyIQVjGiQR_gBEAOx4GReclxiKkj0ykCw"
)

SIGNING_KEYS = [
    {
        "kty": "OKP",
        "alg": "EdDSA",
        "crv": "Ed25519",
        "x": "AyWNdu76ZooWm09lIuFcfckN5uzWIKsoyyC55TZnJMk",
    }
]


def pytest_configure():
    # Just the public part of a key,
    # generated by openssl, as described in readme.
    keys = SIGNING_KEYS
    settings.configure(
        APIKEY_LOCALKEYS=keys, APIKEY_MANDATORY=False, APIKEY_ALLOW_EMPTY=False
    )  #  APIKEY_LOGGER=None)


@pytest.fixture
def signing_keys():
    return SIGNING_KEYS
